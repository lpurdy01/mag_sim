
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="2D Motor Simulator — user & developer docs">
      
      
      
        <link rel="canonical" href="https://lpurdy01.github.io/mag_sim/user-guide/machines/pm-synchronous/">
      
      
        <link rel="prev" href="../induction/">
      
      
        <link rel="next" href="../dc-commutated/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Three-Phase PM Motor Scenario - mag_sim Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#three-phase-pm-motor-scenario" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="mag_sim Documentation" class="md-header__button md-logo" aria-label="mag_sim Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mag_sim Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Three-Phase PM Motor Scenario
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lpurdy01/mag_sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mag_sim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="mag_sim Documentation" class="md-nav__button md-logo" aria-label="mag_sim Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    mag_sim Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lpurdy01/mag_sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mag_sim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../running-simulations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui_flask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web GUI (Flask)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../three-phase-stator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Machines
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Machines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../induction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Three-Phase Induction Motor Spin-Up
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Three-Phase PM Motor Scenario
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Three-Phase PM Motor Scenario
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quickstart-locked-rotor" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart (locked rotor)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Spin-up mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Profiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenario-highlights" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario highlights
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ci-spin-up-fixture-at-a-glance" class="md-nav__link">
    <span class="md-ellipsis">
      CI spin-up fixture at a glance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faster-local-experiments" class="md-nav__link">
    <span class="md-ellipsis">
      Faster local experiments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips" class="md-nav__link">
    <span class="md-ellipsis">
      Tips
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dc-commutated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DC motor with commutated armature
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../visualization/overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Visualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualization/vtk-output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VTK Field Map Exports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualization/comparison-sor-vs-cg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SOR vs CG Visual Comparison
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../torque-and-forces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Torque & Forces
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../developer-guide/dev-environment/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../developer-guide/implementation/status/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Implementation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/implementation/progress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solver Epic Implementation Progress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/implementation/flask-gui-progress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flask GUI Implementation Progress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/implementation/validation-stages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analytical Validation Ladder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/implementation/solver-benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solver Performance &amp; Complexity Notes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../developer-guide/math-and-solver/overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Math & Solver
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Math & Solver
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/math-and-solver/fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Magnetostatic Solver Math Notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/math-and-solver/back-emf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Back-EMF Probes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/math-and-solver/time-series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time-Series Frames and Parallel Solving
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/equations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/file-formats/vtk/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    File Formats
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            File Formats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/file-formats/scenario-json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scenario JSON
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quickstart-locked-rotor" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart (locked rotor)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Spin-up mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Profiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenario-highlights" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario highlights
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ci-spin-up-fixture-at-a-glance" class="md-nav__link">
    <span class="md-ellipsis">
      CI spin-up fixture at a glance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faster-local-experiments" class="md-nav__link">
    <span class="md-ellipsis">
      Faster local experiments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips" class="md-nav__link">
    <span class="md-ellipsis">
      Tips
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="three-phase-pm-motor-scenario">Three-Phase PM Motor Scenario<a class="headerlink" href="#three-phase-pm-motor-scenario" title="Permanent link">&para;</a></h1>
<p>This walkthrough builds on the rotating-field stator demo by adding a
  surface-mounted permanent-magnet rotor (trimmed to 1×10⁵ A/m with μᵣ≈1.05),
  per-phase RL circuits, and a lightweight mechanical model driven by 35 A peak stator
currents. Use it to explore torque production, back-EMF, and circuit response in
a synchronous motor setting. The generator now supports both a locked-rotor mode
(matching earlier releases) and a spin-up mode that lets the mechanical
integrator advance the rotor angle from the electromagnetic torque.</p>
<h2 id="quickstart-locked-rotor">Quickstart (locked rotor)<a class="headerlink" href="#quickstart-locked-rotor" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>python/gen_three_phase_pm_motor.py<span class="w"> </span>--profile<span class="w"> </span>ci<span class="w"> </span>--mode<span class="w"> </span>locked<span class="w"> </span>--out<span class="w"> </span>inputs/three_phase_pm_motor_ci.json
./build/motor_sim<span class="w"> </span>--scenario<span class="w"> </span>inputs/three_phase_pm_motor_ci.json<span class="w"> </span>--solve<span class="w"> </span>--vtk-series<span class="w"> </span>outputs/pm_motor_ci.pvd<span class="w"> </span>--tol<span class="w"> </span>5e-6<span class="w"> </span>--max-iters<span class="w"> </span><span class="m">40000</span>
python3<span class="w"> </span>python/animate_three_phase.py<span class="w"> </span>--pvd<span class="w"> </span>outputs/pm_motor_ci.pvd<span class="w"> </span>--scenario<span class="w"> </span>inputs/three_phase_pm_motor_ci.json<span class="w"> </span>--save<span class="w"> </span>pm_motor_demo.mp4<span class="w"> </span>--frame-png<span class="w"> </span>pm_motor_demo.png
</code></pre></div>
<p>The locked mode emits the same deterministic timeline used in earlier demos: it
drives sinusoidal phase voltages, integrates coil currents via the circuit
solver, and keeps the rotor phased to the stator field via explicit
<code>rotor_angles</code> entries.</p>
<h2 id="spin-up-mode">Spin-up mode<a class="headerlink" href="#spin-up-mode" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>python/gen_three_phase_pm_motor.py<span class="w"> </span>--profile<span class="w"> </span>ci<span class="w"> </span>--mode<span class="w"> </span>spinup<span class="w"> </span>--out<span class="w"> </span>inputs/three_phase_pm_motor_spinup_ci.json
./build/motor_sim<span class="w"> </span>--scenario<span class="w"> </span>inputs/three_phase_pm_motor_spinup_ci.json<span class="w"> </span>--solve<span class="w"> </span>--vtk-series<span class="w"> </span>outputs/pm_motor_spinup_ci.pvd<span class="w"> </span>--tol<span class="w"> </span>5e-6<span class="w"> </span>--max-iters<span class="w"> </span><span class="m">40000</span>
python3<span class="w"> </span>python/check_pm_spinup.py<span class="w"> </span>--mechanical<span class="w"> </span>outputs/pm_motor_spinup_mechanical.csv<span class="w"> </span>--scenario<span class="w"> </span>inputs/three_phase_pm_motor_spinup_ci.json
python3<span class="w"> </span>python/animate_three_phase.py<span class="w"> </span>--pvd<span class="w"> </span>outputs/pm_motor_spinup_ci.pvd<span class="w"> </span>--scenario<span class="w"> </span>inputs/three_phase_pm_motor_spinup_ci.json<span class="w"> </span>--save<span class="w"> </span>pm_motor_spinup.mp4<span class="w"> </span>--frame-png<span class="w"> </span>pm_motor_spinup.png
</code></pre></div>
<p>Spin-up removes the timeline rotor overrides so the RK4 mechanical integrator
advances the rotor based on the torque probe feedback. The generator also emits
<code>pm_motor_spinup_mechanical.csv</code>, a rotor angle/speed log that the
<code>python/check_pm_spinup.py</code> helper validates for monotonic acceleration.</p>
<h2 id="profiles">Profiles<a class="headerlink" href="#profiles" title="Permanent link">&para;</a></h2>
<p><code>python/gen_three_phase_pm_motor.py</code> exposes the same <code>ci</code> and <code>hires</code> presets as
the stator generator. Use <code>--mode locked</code> (default) for the deterministic rotor
timeline or <code>--mode spinup</code> to enable mechanical integration. All profiles accept
<code>--cycles</code> and <code>--frames-per-cycle</code> overrides when you need shorter or longer
timelines:</p>
<ul>
<li><code>ci</code>: 65×65 grid, 12 frames (one electrical cycle)</li>
<li><code>hires</code>: 401×401 grid, 120 frames per cycle, three electrical cycles</li>
</ul>
<p>Pass <code>--profile hires</code> to emit the larger dataset. All downstream commands stay
the same.</p>
<h2 id="scenario-highlights">Scenario highlights<a class="headerlink" href="#scenario-highlights" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Rotor assembly</strong> – A rigid body named <code>pm_rotor</code> groups the rotor iron
  polygon and the rectangular magnet block. The generator also carves the magnet
  out of the rotor iron and assigns it the <code>pm_magnet</code> material (μᵣ≈1.05) so the
  magnetisation vector does not experience an 800× permeability boost. Locked mode includes
  <code>"rotor_angles"</code> timeline entries to phase-lock the magnet to the rotating
  stator field by a configurable load angle, while spin-up mode omits them so
  the mechanical integrator owns the pose.</li>
<li><strong>Circuits</strong> – The <code>stator_three_phase</code> network models each phase as a series
  <code>R-L</code> branch with a driven voltage source. Coil links bind both slot polygons
  for a phase to the shared inductor so the circuit solver injects equal and
  opposite current densities. The ingestor now enforces that each coil link’s
  turn count matches the associated <code>current_region</code>, keeping the magnetic
  ampere-turn budget consistent between the field solve and the circuit model.</li>
<li><strong>Slot packing</strong> – Slot polygons carry 60 turns apiece with a 0.55 fill
  fraction. The rasteriser multiplies the timeline or circuit current by both
  factors so the resulting ampere-turn budget matches what the circuit solver
  assumes when computing coil flux linkages.</li>
<li><strong>Bore field levels</strong> – The pm-magnet material keeps |B| in the rotor block on
  roughly the same sub-tesla scale as the driven stator coils rather than the
  50–200 T range seen when the magnet inherited the 800× permeability of the
  surrounding steel. This makes the torque interaction easier to inspect and
  maintains a realistic magnitude for induced voltages.</li>
<li><strong>Mechanical coupling</strong> – The <code>mechanical</code> section specifies rotor inertia,
  viscous damping, constant load torque, and the torque probe that feeds the
  integrator. Spin-up mode keeps the timeline free of overrides so the solver
  performs an RK4 update after each frame to evolve angle and speed.</li>
<li><strong>Probes</strong> – Back-EMF loops measure the induced voltage inside every positive
  slot, while the torque probe wraps a circular loop just outside the rotor to
  collect Maxwell stress and co-energy samples.</li>
</ul>
<h2 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">&para;</a></h2>
<ul>
<li>Locked mode uses the <code>pm_motor_*.csv/.vti/.pvd</code> naming scheme. Spin-up mode
  mirrors the same exports with a <code>pm_motor_spinup_*</code> prefix and adds
  <code>pm_motor_spinup_mechanical.csv</code> capturing time, angle, speed, and torque for
  each rotor sample.</li>
<li>Torque CSVs now aggregate timeline samples at the base path (for example
  <code>pm_motor_spinup_torque.csv</code>). Each row records <code>time_s,frame_index,Fx,Fy,Tz</code>
  and, when available, <code>CoEnergy</code>, so finite-difference virtual-work checks can
  be run directly against the solved timeline without chasing individual
  <code>_frame_###</code> files.</li>
<li>Both modes emit a <code>circuit_trace</code> CSV (<code>pm_motor_currents.csv</code> or
  <code>pm_motor_spinup_currents.csv</code>) listing per-coil ampere-turn histories. The
  file feeds the <code>python/generate_rotor_animation.py</code> helper so slot colours in
  the rotor-only GIFs reflect the solved coil currents.</li>
</ul>
<h3 id="ci-spin-up-fixture-at-a-glance">CI spin-up fixture at a glance<a class="headerlink" href="#ci-spin-up-fixture-at-a-glance" title="Permanent link">&para;</a></h3>
<p>The regression stored at <code>inputs/tests/pm_motor_spinup_test.json</code> is generated
verbatim from:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>python/gen_three_phase_pm_motor.py<span class="w"> </span>--profile<span class="w"> </span>ci<span class="w"> </span>--mode<span class="w"> </span>spinup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--out<span class="w"> </span>inputs/tests/pm_motor_spinup_test.json
</code></pre></div>
<p>The JSON clocks in at roughly 1.3k lines—the generator rounds coordinates to
three decimal places for the CI profile and keeps each circular boundary to a
few dozen segments (18 for the stator, 12 for the bore, 10 for the rotor, 24
for the torque loop). The timeline spans a single electrical cycle (10 frames)
so the mechanical solver still sees enough motion to verify acceleration. Key
baked-in values for the CI fixture are:</p>
<table>
<thead>
<tr>
<th>Quantity</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Grid</td>
<td>65×65 Cartesian cells over a 0.14 m square</td>
</tr>
<tr>
<td>Electrical frequency</td>
<td>60 Hz (10 frames per cycle, 1 cycle)</td>
</tr>
<tr>
<td>Rotor inertia / damping</td>
<td>8.0×10⁻⁴ kg·m², 5.0×10⁻⁵ N·m·s</td>
</tr>
<tr>
<td>Load torque</td>
<td>0.12 N·m opposing rotation</td>
</tr>
<tr>
<td>Magnet strength</td>
<td>1×10⁵ A/m surface-mounted block</td>
</tr>
<tr>
<td>Slot turns / fill</td>
<td>60 turns per slot, 0.55 copper fill fraction</td>
</tr>
<tr>
<td>Phase drive</td>
<td>35 A peak warm-start currents with 20 V peak phase voltage</td>
</tr>
</tbody>
</table>
<p>Rather than editing the JSON manually, re-run the generator when you need to
tweak those knobs so the derived polygons stay consistent.</p>
<h3 id="faster-local-experiments">Faster local experiments<a class="headerlink" href="#faster-local-experiments" title="Permanent link">&para;</a></h3>
<p>The bundled test still takes roughly a minute on two vCPUs so the torque and
mechanical traces match the CI artefacts while remaining tractable. For
day-to-day iteration you
can emit smaller timelines without touching the committed fixture. A few useful
variants:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Half a cycle on the CI grid (6 frames) for quick smoke checks</span>
python3<span class="w"> </span>python/gen_three_phase_pm_motor.py<span class="w"> </span>--profile<span class="w"> </span>ci<span class="w"> </span>--mode<span class="w"> </span>spinup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--frames-per-cycle<span class="w"> </span><span class="m">6</span><span class="w"> </span>--cycles<span class="w"> </span><span class="m">1</span><span class="w"> </span>--out<span class="w"> </span>scratch/spinup_quick.json

<span class="c1"># Coarser mechanical sampling on a reduced grid</span>
python3<span class="w"> </span>python/gen_three_phase_pm_motor.py<span class="w"> </span>--profile<span class="w"> </span>ci<span class="w"> </span>--mode<span class="w"> </span>spinup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cycles<span class="w"> </span><span class="m">1</span><span class="w"> </span>--frames-per-cycle<span class="w"> </span><span class="m">8</span><span class="w"> </span>--out<span class="w"> </span>scratch/spinup_57.json

<span class="c1"># Re-run only the spin-up regression once you have a new fixture</span>
ctest<span class="w"> </span>--test-dir<span class="w"> </span>build<span class="w"> </span>--output-on-failure<span class="w"> </span>-R<span class="w"> </span>pm_motor_spinup
</code></pre></div>
<p>Keep the official regression JSON in place so GitHub Actions exercises the full
solve, but feel free to adjust the generator overrides locally when validating
mechanical changes or iterating on torque probes.</p>
<h2 id="tips">Tips<a class="headerlink" href="#tips" title="Permanent link">&para;</a></h2>
<ul>
<li>Run <code>python/check_three_phase_field.py</code> against the generated <code>.pvd</code> to verify
  the bore angle rotates monotonically and maintains a strong |B| magnitude.</li>
<li>Use <code>python/check_pm_spinup.py</code> on spin-up runs to assert that rotor angle and
  speed change monotonically in magnitude throughout the timeline (the helper
  reports absolute angle/speed gains, so it also tolerates rotors that spin in
  the negative direction as in the induction demo).</li>
<li>The mechanical integrator respects timeline rotor overrides; locked mode
  retains them while spin-up drops them so the solver can demonstrate the coupled
  evolution.</li>
<li>Pair the torque CSV with the co-energy column to compute finite-difference
  virtual-work torque checks over neighbouring frames.</li>
<li>Keep generated VTK/MP4 artefacts out of the repository. CI uploads small
  samples for review when the workflow executes the PM motor pipeline.</li>
<li>Looking for a transient induction counterpart? See
  <code>docs/three_phase_induction_motor.md</code> for the conductive-bar spin-up workflow.</li>
</ul>
<p><a class="md-button" href="../../../developer-guide/dev-environment/">Open in GUI</a></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 21, 2025 00:02:02 UTC">October 21, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.indexes", "navigation.instant", "content.code.copy", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../assets/javascripts/mathjax-init.js"></script>
      
    
  </body>
</html>
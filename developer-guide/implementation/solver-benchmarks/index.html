
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="2D Motor Simulator â€” user & developer docs">
      
      
      
        <link rel="canonical" href="https://lpurdy01.github.io/mag_sim/developer-guide/implementation/solver-benchmarks/">
      
      
        <link rel="prev" href="../validation-stages/">
      
      
        <link rel="next" href="../../math-and-solver/overview/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Solver Performance & Complexity Notes - mag_sim Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#solver-performance-complexity-notes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="mag_sim Documentation" class="md-header__button md-logo" aria-label="mag_sim Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mag_sim Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Solver Performance &amp; Complexity Notes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lpurdy01/mag_sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mag_sim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="mag_sim Documentation" class="md-nav__button md-logo" aria-label="mag_sim Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    mag_sim Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lpurdy01/mag_sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mag_sim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user-guide/running-simulations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/gui_flask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web GUI (Flask)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user-guide/machines/three-phase-stator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Machines
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Machines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/machines/induction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Three-Phase Induction Motor Spin-Up
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/machines/pm-synchronous/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Three-Phase PM Motor Scenario
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/machines/dc-commutated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DC motor with commutated armature
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user-guide/visualization/overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Visualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/visualization/vtk-output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VTK Field Map Exports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/visualization/comparison-sor-vs-cg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SOR vs CG Visual Comparison
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/torque-and-forces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Torque & Forces
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../dev-environment/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../status/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Implementation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../progress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solver Epic Implementation Progress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flask-gui-progress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flask GUI Implementation Progress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation-stages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analytical Validation Ladder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Solver Performance &amp; Complexity Notes
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Solver Performance &amp; Complexity Notes
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-complexity-heuristics" class="md-nav__link">
    <span class="md-ellipsis">
      1. Complexity heuristics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-reference-timings-single-thread-baseline" class="md-nav__link">
    <span class="md-ellipsis">
      2. Reference timings (single-thread baseline)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Reference timings (single-thread baseline)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-convergence-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Convergence comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-field-evolution-snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Field evolution snapshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-single-thread-scaling-measurements" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Single-thread scaling measurements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cg-solver-notes" class="md-nav__link">
    <span class="md-ellipsis">
      CG solver notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-benchmark-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      3. Benchmark workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-recommendations-for-automated-tests" class="md-nav__link">
    <span class="md-ellipsis">
      4. Recommendations for automated tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-estimating-simulation-turnaround" class="md-nav__link">
    <span class="md-ellipsis">
      5. Estimating simulation turnaround
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../math-and-solver/overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Math & Solver
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Math & Solver
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../math-and-solver/fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Magnetostatic Solver Math Notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../math-and-solver/back-emf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Back-EMF Probes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../math-and-solver/time-series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time-Series Frames and Parallel Solving
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/equations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/file-formats/vtk/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    File Formats
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            File Formats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/file-formats/scenario-json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scenario JSON
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-complexity-heuristics" class="md-nav__link">
    <span class="md-ellipsis">
      1. Complexity heuristics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-reference-timings-single-thread-baseline" class="md-nav__link">
    <span class="md-ellipsis">
      2. Reference timings (single-thread baseline)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Reference timings (single-thread baseline)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-convergence-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Convergence comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-field-evolution-snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Field evolution snapshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-single-thread-scaling-measurements" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Single-thread scaling measurements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cg-solver-notes" class="md-nav__link">
    <span class="md-ellipsis">
      CG solver notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-benchmark-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      3. Benchmark workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-recommendations-for-automated-tests" class="md-nav__link">
    <span class="md-ellipsis">
      4. Recommendations for automated tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-estimating-simulation-turnaround" class="md-nav__link">
    <span class="md-ellipsis">
      5. Estimating simulation turnaround
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="solver-performance-complexity-notes">Solver Performance &amp; Complexity Notes<a class="headerlink" href="#solver-performance-complexity-notes" title="Permanent link">&para;</a></h1>
<p>This note captures rule-of-thumb complexity estimates for the Gaussâ€“Seidel/SOR
and conjugate-gradient (CG) solvers, together with timing measurements gathered
with <code>tools/solver_benchmark</code>. All reported numbers come from single-threaded
runs so you can scale them directly with per-core performance when planning
work in lightweight environments such as GitHub Codespaces.</p>
<p>The newly introduced harmonic solve (<code>--solver harmonic</code>) reuses the CG backend
on a doubled system (real/imaginary components). Complexity follows the CG
trends quoted below; expect roughly a 2Ã— increase in per-iteration cost versus a
purely real solve because the normal equations require two operator applications
per iteration.</p>
<h2 id="1-complexity-heuristics">1. Complexity heuristics<a class="headerlink" href="#1-complexity-heuristics" title="Permanent link">&para;</a></h2>
<ul>
<li>Each SOR sweep visits every interior cell once, so the cost per iteration is
  <span class="arithmatex">\(\mathcal{O}(n_x n_y)\)</span>.</li>
<li>The number of iterations required to hit a fixed tolerance grows roughly with
  the grid dimension because Gaussâ€“Seidel damps high-frequency error quickly but
  converges slowly on low-frequency modes. For uniform grids, iteration counts on
  the wire test scale approximately with <span class="arithmatex">\(\mathcal{O}(n_x)\)</span>.</li>
<li>Wall-clock time is therefore well-approximated by</li>
</ul>
<p>$$
  t \approx \alpha\, n_x n_y N_\text{iter},
  $$</p>
<p>where <span class="arithmatex">\(\alpha\)</span> is the time per cell-iteration. On the single-threaded
  reference hardware below <span class="arithmatex">\(\alpha \approx 9.4 \times 10^{-8}\)</span> s (â‰ˆ 94 ms per
  million cell-iterations).</p>
<p>Measured CG solves follow an <span class="arithmatex">\(\mathcal{O}(n_x^3)\)</span> trend while SOR sits close to
<span class="arithmatex">\(\mathcal{O}(n_x^4)\)</span>; see Section&nbsp;2.3 for the fit parameters.</p>
<p>When planning new tests, estimate the runtime via the reported
"ms per million cell-iterations" (Section 2) or the scaling fits. For example,
the CG baseline predicts a 401Ã—401 solve at <code>1.8e-7 Ã— 401^3 â‰ˆ 12 s</code>; the SOR
solver would require minutes for the same grid because of its steeper
<span class="arithmatex">\(\mathcal{O}(n_x^4)\)</span> behaviour.</p>
<h2 id="2-reference-timings-single-thread-baseline">2. Reference timings (single-thread baseline)<a class="headerlink" href="#2-reference-timings-single-thread-baseline" title="Permanent link">&para;</a></h2>
<p>Hardware/software snapshot:</p>
<ul>
<li>GitHub Codespaces container (Intel Xeon-class core; solver runs on one thread).</li>
<li>Ubuntu 22.04 container with GCC 13.3, CMake 3.22.</li>
<li>Build type: <code>Debug</code> (default <code>cmake-configure</code>).</li>
<li>SIMD hints: enabled by default via the <code>MOTORSIM_ENABLE_SIMD_HINTS</code> CMake option
  (adds <code>-DMOTORSIM_SIMD_HINTS</code>). Disable the hints with
  <code>-DMOTORSIM_ENABLE_SIMD_HINTS=OFF</code> when comparing against historical runs.</li>
<li>Benchmarks executed via <code>tools/solver_benchmark --repeats 3</code>.</li>
</ul>
<h3 id="21-convergence-comparison">2.1 Convergence comparison<a class="headerlink" href="#21-convergence-comparison" title="Permanent link">&para;</a></h3>
<p><img alt="CG vs SOR convergence overlay" src="../../../assets/images/CG_vs_SOR_convergence_overlay.png" /></p>
<p>The overlay highlights how quickly the CG backend suppresses low-frequency
error compared with SOR on the iron-ring + magnet scenario. Both runs use the
same tolerance (1e-6) and operate entirely on a single CPU core.</p>
<h3 id="22-field-evolution-snapshots">2.2 Field evolution snapshots<a class="headerlink" href="#22-field-evolution-snapshots" title="Permanent link">&para;</a></h3>
<p><img alt="CG progress snapshots" src="../../../assets/images/progress_snapshots_cg.gif" /></p>
<p>The animated field map (CG trace shown; an SOR variant lives at
<code>../../assets/images/progress_snapshots_sor.gif</code>) illustrates which spatial structures are
responsible for the final residual plateau. These snapshots are handy when
explaining solver behaviour or validating new preconditioners.</p>
<h3 id="23-single-thread-scaling-measurements">2.3 Single-thread scaling measurements<a class="headerlink" href="#23-single-thread-scaling-measurements" title="Permanent link">&para;</a></h3>
<p><img alt="Solver scaling comparison" src="../../../solver_benchmark/benchmark/solver_scaling.png" /></p>
<p>The plot combines per-solve timings for grids from 65Â² up to 961Â² (CG) and
65Â²â€“129Â² (SOR). The straight lines show least-squares fits of the form
<code>solve_time â‰ˆ a Â· N^k</code>; coefficients are recorded in
<code>docs/solver_benchmark/benchmark/solver_scaling_summary.txt</code>:</p>
<ul>
<li>CG: <span class="arithmatex">\(k = 2.99,\ a = 1.82 \times 10^{-7}\)</span> seconds.</li>
<li>SOR: <span class="arithmatex">\(k = 4.05,\ a = 1.07 \times 10^{-8}\)</span> seconds (fit based on three
  points; expect higher variance on larger grids).</li>
</ul>
<p>Representative samples (single solve, tolerance <code>1e-6</code>, no warm start):</p>
<table>
<thead>
<tr>
<th>Solver</th>
<th style="text-align: right;">Grid N</th>
<th style="text-align: right;">Cells</th>
<th style="text-align: right;">Iterations</th>
<th style="text-align: right;">Avg solve [ms]</th>
<th style="text-align: right;">~Seconds per 120-frame cycle</th>
</tr>
</thead>
<tbody>
<tr>
<td>CG</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">4,225</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">42.3</td>
<td style="text-align: right;">5.1</td>
</tr>
<tr>
<td>CG</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">16,641</td>
<td style="text-align: right;">213</td>
<td style="text-align: right;">333.7</td>
<td style="text-align: right;">40.0</td>
</tr>
<tr>
<td>CG</td>
<td style="text-align: right;">257</td>
<td style="text-align: right;">66,049</td>
<td style="text-align: right;">424</td>
<td style="text-align: right;">2,647.1</td>
<td style="text-align: right;">317.7</td>
</tr>
<tr>
<td>CG</td>
<td style="text-align: right;">513</td>
<td style="text-align: right;">263,169</td>
<td style="text-align: right;">842</td>
<td style="text-align: right;">20,976.1</td>
<td style="text-align: right;">2,517.1 (~42 min)</td>
</tr>
<tr>
<td>CG</td>
<td style="text-align: right;">961</td>
<td style="text-align: right;">923,521</td>
<td style="text-align: right;">1,568</td>
<td style="text-align: right;">136,917.0</td>
<td style="text-align: right;">16,430.0 (~4.6 h)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Solver</th>
<th style="text-align: right;">Grid N</th>
<th style="text-align: right;">Cells</th>
<th style="text-align: right;">Iterations</th>
<th style="text-align: right;">Avg solve [ms]</th>
<th style="text-align: right;">~Seconds per 120-frame cycle</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOR</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">4,225</td>
<td style="text-align: right;">624</td>
<td style="text-align: right;">232.4</td>
<td style="text-align: right;">27.9</td>
</tr>
<tr>
<td>SOR</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">9,409</td>
<td style="text-align: right;">1,394</td>
<td style="text-align: right;">1,185.2</td>
<td style="text-align: right;">142.2</td>
</tr>
<tr>
<td>SOR</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">16,641</td>
<td style="text-align: right;">2,452</td>
<td style="text-align: right;">3,723.9</td>
<td style="text-align: right;">446.9 (~7.4 min)</td>
</tr>
</tbody>
</table>
<p>Throughput stays close to 10.6 million cell-iterations per second for both
solvers; iteration count is the dominant lever on runtime.</p>
<h3 id="cg-solver-notes">CG solver notes<a class="headerlink" href="#cg-solver-notes" title="Permanent link">&para;</a></h3>
<p>The preconditioned CG solver operates on the same operator but converges in an
order of magnitude fewer iterations on most problems. Two practical tips when
benchmarking CG:</p>
<ul>
<li>Warm-starting (<code>--warm-start</code>) on timeline runs typically halves the iteration
  count after the first frame.</li>
<li>Enabling coarse-to-fine prolongation (<code>--use-prolongation</code>) provides a
  high-quality initial guess for fine grids, keeping CG iteration counts
  comparable to SOR while meeting tighter tolerances.</li>
<li>Switching the preconditioner via <code>--pc {none|jacobi|ssor}</code> can cut iteration
  counts dramatically on conductive grids. Jacobi tends to pay off once
  <span class="arithmatex">\(\sigma &gt; 0\)</span>; SSOR is helpful when permeability contrasts exceed 100Ã—.</li>
</ul>
<h2 id="3-benchmark-workflow">3. Benchmark workflow<a class="headerlink" href="#3-benchmark-workflow" title="Permanent link">&para;</a></h2>
<ol>
<li>Build the tool: <code>cmake --build build --target solver_benchmark -j</code>.</li>
<li>Run with custom parameters. Example:</li>
</ol>
<div class="highlight"><pre><span></span><code>./build/solver_benchmark<span class="w"> </span>--nx<span class="w"> </span><span class="m">201</span><span class="w"> </span>--ny<span class="w"> </span><span class="m">201</span><span class="w"> </span>--omega<span class="w"> </span><span class="m">1</span>.9<span class="w"> </span>--tol<span class="w"> </span>1e-6<span class="w"> </span>--repeats<span class="w"> </span><span class="m">5</span>
</code></pre></div>
<ol>
<li>Optional: append to a CSV log for historical comparison using
   <code>--csv outputs/solver_benchmarks.csv</code>.</li>
</ol>
<p>The binary resets the solution between repeats so the reported timings are not
influenced by warm caches from previous runs. Include the hardware description
whenever posting new numbers to this table.</p>
<h2 id="4-recommendations-for-automated-tests">4. Recommendations for automated tests<a class="headerlink" href="#4-recommendations-for-automated-tests" title="Permanent link">&para;</a></h2>
<ul>
<li>Keep CI-oriented tests at â‰¤ 201Â² cells with <span class="arithmatex">\(\omega\)</span> tuned for rapid
  convergence.</li>
<li>Increase tolerances (e.g., <code>tol = 5e-6</code>) for exploratory notebooks to trade
  accuracy for turnaround.</li>
<li>Use the CSV logging mode when experimenting with algorithmic tweaks so
  performance regressions are easy to detect.</li>
</ul>
<h2 id="5-estimating-simulation-turnaround">5. Estimating simulation turnaround<a class="headerlink" href="#5-estimating-simulation-turnaround" title="Permanent link">&para;</a></h2>
<p>To approximate wall-clock runtime for a new configuration:</p>
<ol>
<li>Decide which solver you intend to use and locate the closest grid size in
  <code>docs/solver_benchmark/benchmark/solver_scaling_summary.txt</code>.</li>
<li>For CG, scale from the <span class="arithmatex">\(1.82 \times 10^{-7} N^3\)</span> fit; for SOR, start from
  the <span class="arithmatex">\(1.07 \times 10^{-8} N^{4.05}\)</span> estimate and adjust using the measured
  per-cycle numbers above.</li>
<li>Multiply the per-solve time by the number of timeline frames (or reuse the
  <code>~seconds per 120-frame cycle</code> column if your export matches that cadence).</li>
<li>Apply warm-start and prolongation discounts where applicable (40â€“60% savings
  are common once the first frame converges).</li>
</ol>
<p>These heuristics assume strictly single-threaded execution. Parallelisation (not
yet wired in for the production solvers) or different build types will shift the
absolute numbers, but the scaling slopes remain a reliable rule of thumb.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 21, 2025 17:30:51 UTC">October 21, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.indexes", "navigation.instant", "content.code.copy", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../assets/javascripts/mathjax-init.js"></script>
      
    
  </body>
</html>
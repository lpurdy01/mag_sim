{
  "version": "0.2",
  "units": "SI",
  "domain": {
    "Lx": 0.12,
    "Ly": 0.12,
    "nx": 61,
    "ny": 61
  },
  "materials": [
    {"name": "air", "mu_r": 1.0},
    {"name": "rotor_steel", "mu_r": 12.0}
  ],
  "regions": [
    {"type": "uniform", "material": "air"},
    {
      "type": "polygon",
      "material": "rotor_steel",
      "vertices": [
        [0.0, -0.028],
        [0.02, -0.02],
        [0.028, 0.0],
        [0.02, 0.02],
        [0.0, 0.028],
        [-0.02, 0.02],
        [-0.028, 0.0],
        [-0.02, -0.02]
      ]
    }
  ],
  "sources": [
    {"type": "wire", "x": -0.04, "y": 0.0, "radius": 0.003, "I": 200.0},
    {"type": "wire", "x": 0.04, "y": 0.0, "radius": 0.003, "I": -200.0}
  ],
  "magnet_regions": [
    {
      "type": "rect",
      "x_range": [-0.01, 0.01],
      "y_range": [-0.01, 0.01],
      "magnetization": [350000.0, 0.0]
    }
  ],
  "rotors": [
    {
      "name": "rotor",
      "pivot": [0.0, 0.0],
      "polygon_indices": [0],
      "magnet_indices": [0]
    }
  ],
  "outputs": [
    {
      "type": "field_map",
      "id": "ripple_field",
      "quantity": "B",
      "format": "vti",
      "path": "outputs/rotor_ripple_field.vti"
    },
    {
      "type": "field_map",
      "id": "ripple_field_csv",
      "quantity": "B",
      "format": "csv",
      "path": "outputs/rotor_ripple_field.csv"
    },
    {
      "type": "line_probe",
      "id": "midline",
      "axis": "y",
      "value": 0.0,
      "quantity": "Bmag",
      "path": "outputs/rotor_ripple_midline.csv"
    },
    {
      "type": "probe",
      "id": "torque_loop",
      "probe_type": "torque",
      "method": "stress_tensor",
      "loop": {
        "type": "polygon",
        "vertices": [
          [-0.0165, -0.0165],
          [0.0165, -0.0165],
          [0.0165, 0.0165],
          [-0.0165, 0.0165]
        ]
      },
      "path": "outputs/rotor_ripple_torque.csv"
    },
    {
      "type": "back_emf_probe",
      "id": "coil_emf",
      "component": "Bmag",
      "region": {
        "type": "rect",
        "x_range": [-0.018, 0.018],
        "y_range": [-0.018, 0.018]
      },
      "frames": [0, 1, 2, 3],
      "path": "outputs/rotor_ripple_emf.csv"
    }
  ],
  "timeline": [
    {"t": 0.0, "rotor_angles": {"rotor": 0.0}},
    {"t": 0.001, "rotor_angles": {"rotor": 60.0}},
    {"t": 0.002, "rotor_angles": {"rotor": 120.0}},
    {"t": 0.003, "rotor_angles": {"rotor": 180.0}}
  ]
}
